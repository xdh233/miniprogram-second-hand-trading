<!-- market.wxml - é—²ç½®å¸‚åœºé¡µé¢ -->
<view class="container">
  <!-- é¡¶éƒ¨æœç´¢æ  -->
  <view class="search-header">
    <view class="search-box">
      <icon class="search-icon" type="search" size="16" />
      <input placeholder="æœç´¢é—²ç½®å•†å“..." confirm-type="search" bindinput="onSearchInput" bindconfirm="onSearch" />
    </view>
  </view>

  <!-- åˆ†ç±»æ ‡ç­¾æ  -->
  <view class="category-section">
    <scroll-view class="category-tabs" scroll-x>
      <view 
        class="category-tab {{currentCategory === item.id ? 'active' : ''}}" 
        wx:for="{{categories}}" 
        wx:key="id"
        bindtap="switchCategory"
        data-id="{{item.id}}"
      >
        {{item.name}}
      </view>
    </scroll-view>
  </view>

  <!-- å•†å“åˆ—è¡¨ - åŒåˆ—å¸ƒå±€ -->
  <scroll-view class="content-area" scroll-y refresher-enabled bindrefresherrefresh="onRefresh" refresher-triggered="{{refreshing}}" bindscrolltolower="loadMore">
    <view class="items-grid">
      <view 
        class="item-card" 
        wx:for="{{items}}" 
        wx:key="id" 
        bindtap="navigateToItemDetail" 
        data-id="{{item.id}}"
      >
        <!-- å•†å“å›¾ç‰‡ -->
        <view class="item-image-container">
          <image class="item-image" src="{{item.images[0] || '/images/placeholder.png'}}" mode="aspectFill" />
          <!-- å•†å“çŠ¶æ€æ ‡ç­¾ -->
          <view class="status-tag" wx:if="{{item.status !== 'available'}}">
            <text wx:if="{{item.status === 'sold'}}">å·²å”®å‡º</text>
            <text wx:if="{{item.status === 'reserved'}}">å·²é¢„å®š</text>
          </view>
        </view>
        
        <!-- å•†å“ä¿¡æ¯ -->
        <view class="item-info">
          <!-- å•†å“æ ‡é¢˜ -->
          <view class="item-title">{{item.title}}</view>
          
          <!-- å•†å“ä»·æ ¼ -->
          <view class="item-price">Â¥{{item.price}}</view>
          
          <!-- å‘å¸ƒäººä¿¡æ¯ -->
          <view class="seller-info">
            <image class="seller-avatar" src="{{item.sellerAvatar || '/images/default-avatar.png'}}" />
            <text class="seller-name">{{item.sellerName}}</text>
            <!-- å–/æ”¶æ ‡ç­¾ -->
            <view class="trade-type {{item.tradeType === 'sell' ? 'sell' : 'buy'}}">
              {{item.tradeType === 'sell' ? 'å–' : 'æ”¶'}}
            </view>
          </view>
        </view>
      </view>
    </view>

    <!-- åŠ è½½æ›´å¤š -->
    <view class="loading-more" wx:if="{{hasMore}}">
      <text>åŠ è½½ä¸­...</text>
    </view>
    
    <!-- æ²¡æœ‰æ›´å¤š -->
    <view class="no-more" wx:if="{{!hasMore && items.length > 0}}">
      <text>æ²¡æœ‰æ›´å¤šå•†å“äº†</text>
    </view>

    <!-- ç©ºçŠ¶æ€ -->
    <view class="empty-state" wx:if="{{items.length === 0}}">
      <view class="empty-icon">ğŸ“¦</view>
      <view class="empty-text">æš‚æ— é—²ç½®å•†å“</view>
      <view class="empty-desc">å¿«æ¥å‘å¸ƒç¬¬ä¸€ä¸ªå•†å“å§</view>
    </view>
  </scroll-view>
</view>