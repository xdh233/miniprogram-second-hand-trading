<view class="container">
  <view class="content-container">
    <!-- 顶部标题栏 -->
    <view class="header">
      <view class="title-section">
        <text class="page-title">评论通知</text>
        <text class="count-text" wx:if="{{commentList.length > 0}}">{{commentList.length}}条通知</text>
      </view>
    </view>

    <!-- 评论列表 -->
    <scroll-view 
      class="comments-container"
      scroll-y
      enable-back-to-top
      refresher-enabled
      refresher-triggered="{{refreshing}}"
      bindrefresherrefresh="onPullDownRefresh"
    >
      <!-- 评论列表内容 -->
      <view class="comment-list" wx:if="{{commentList.length > 0}}">
        <view class="comment-item" 
          wx:for="{{commentList}}" 
          wx:key="id"
          data-item="{{item}}"
          bindtap="navigateToContent"
        >
          <view class="comment-main">
            <!-- 头像区域 -->
            <view class="avatar-container">
              <image class="avatar" src="{{item.userAvatar}}" mode="aspectFill"/>
              <!-- 评论图标 -->
              <image class="comment-icon" src="../../images/comment.png" mode="aspectFit" />
            </view>
            
            <view class="comment-info">
              <view class="comment-header">
                <text class="user-name">{{item.userName}}</text>
                <text class="time">{{item.time}}</text>
              </view>
              
              <view class="comment-content">
                <!-- 评论类型标识 -->
                <view class="comment-type">
                  <!-- 帖子评论 -->
                  <text wx:if="{{item.commentType === 'post'}}" class="type-tag post-comment">评论了你的动态</text>
                  <!-- 商品评论 -->
                  <text wx:elif="{{item.commentType === 'item'}}" class="type-tag item-comment">评论了你的商品</text>
                  <!-- 评论回复 -->
                  <text wx:elif="{{item.parent_id}}" class="type-tag comment-reply">回复了你的评论</text>
                </view>
                
                <!-- 评论内容 -->
                <view class="target-content">
                  <text class="content-text">{{item.commentContent}}</text>
                </view>
                
                <!-- 原始内容 -->
                <view class="original-content" wx:if="{{item.targetContent}}">
                  <text class="content-text">{{item.targetContent}}</text>
                </view>
              </view>
            </view>
          </view>
        </view>
      </view>

      <!-- 空状态 -->
      <view class="empty-state" wx:if="{{commentList.length === 0 && !loading}}">
        <image class="empty-icon" src="../../images/comment_empty.png" mode="aspectFit" />
        <text class="empty-title">暂无评论通知</text>
        <text class="empty-subtitle">当有人评论你的动态或商品时会显示在这里</text>
      </view>

      <!-- 加载状态 -->
      <view class="loading-state" wx:if="{{loading}}">
        <text>加载中...</text>
      </view>
    </scroll-view>
  </view>
</view>